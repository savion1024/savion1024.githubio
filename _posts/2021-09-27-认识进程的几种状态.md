---
layout:     post
title:      认识进程的几种状态
subtitle:   有多少种呢？
date:       2021-09-27
author:     savion
header-img: img/post-bg-cook.jpg
catalog: true
tags:
- linux
---


## 先说结论

教科书上我们可以看到以下解释
- 运行（Running）状态：指进程正在运行或准备运行，此时进程已经获得了CPU的时间片，正在使用CPU执行指令。
- 就绪（Ready）状态：指进程已经准备好了运行，等待CPU的调度。此时进程已经获得了除CPU以外的所有资源，只需要等待CPU的调度即可开始执行。
- 阻塞（Blocked）状态：指进程由于等待某些事件发生而暂停执行，例如等待I/O操作完成、等待信号量等等。此时进程失去了CPU的控制权，需要等待某些外部事件的发生才能继续运行。
- 僵尸（Zombie）状态：指进程已经终止，但是其父进程还没有处理其终止状态信息。此时进程已经不再占用系统资源，但是它的进程描述符还存在，需要父进程调用wait()系统调用获取其终止状态信息后才能释放其资源。
- 停止（Stopped）状态：指进程已经停止执行，但是没有被终止。此时进程失去了CPU的控制权，并且不会被调度执行，需要接收到SIGCONT信号才能继续执行

运行ps命令之后我们可以看到有一些标志位

- 运行状态（R）：进程正在运行或在等待CPU时间。
- 中断睡眠状态（S）：进程因等待某个事件而被阻塞，例如等待输入或等待锁定。可以通过发送`信号`或接收事件来唤醒该进程。
- 可中断睡眠状态（D）：进程因等待某些条件而被阻塞，例如等待I/O完成或等待文件系统锁定。与中断睡眠状态不同，可中断睡眠状态进程可以通过发送信号来终止它。
- 停止状态（T）：进程已停止或暂停执行。通常是因为接收到SIGSTOP、SIGTSTP、SIGTTIN或SIGTTOU信号而被停止。
- 僵尸状态（Z）：进程已完成执行，但其父进程还未对其进行善后处理。这意味着进程的元数据仍然存在，但它不会再消耗系统资源。

在旧版本的 Linux 内核中，有一个 I（Idle，空闲）状态，表示进程正在等待 CPU 资源而未被调度。
但在新版本的 Linux 内核中，该状态已经被废弃，改为使用 R（Running，运行）状态来表示进程正在运行但没有正在使用 CPU。
这是因为在多核系统中，即使进程没有在使用 CPU，它仍然可以在等待其他资源，例如 IO 等，
因此将等待 CPU 资源的状态改为了运行状态，更符合实际情况。


## 孤儿进程与僵尸进程

- `孤儿进程`是由于父进程退出没有对子进程做善后工作,导致子进程被`1号进程`托管，这类情况是正常的
- `僵尸进程`是由于进程退出，但是父进程没有做善后处理，所以看起来这个进程实际还在，但其实它只是占用了一个`句柄`，由于服务器句柄有限。所以当僵尸进程过多，就会影响到新进程的创建。


## 总结
- 认识进程的状态可以更好的帮助我们理解服务器的运行情况




